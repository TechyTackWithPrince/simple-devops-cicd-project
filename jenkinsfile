 pipeline {  
   agent any

   stages {   
     stage("Image build") {     
       steps {       
         // variable assignment (other than environment variables) can only be done in a script block
         // complex global variables (with properties or methods) can only be run in a script block
         // env variables can also be set within a script block
         script {    
          nginx_image = docker.build("prince2489/nginximage","-f nginx-nodejs-redis\\nginx\\Dockerfile .")      
          web_image = docker.build("prince2489/webimage","-f nginx-nodejs-redis\\web\\Dockerfile .")      
         }        
       }      
     }
     stage("Run apps using docker compose") {
       steps{  
        bat 'docker-compose -f nginx-nodejs-redis/compose.yaml up -d'  
     }
   } 
 }
 }